(this["webpackJsonpsodiq-vezeti-assignment"]=this["webpackJsonpsodiq-vezeti-assignment"]||[]).push([[62],{2145:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(607),l=t(99),i=t(336),o=t(231),s=t(28),u=t(21),m=t(3),d=t(126),p=t(1076),f=t(1069),b=t(112),h=t(1133),g=t(1113),E=Object(c.a)((function(e){return{root:{display:"flex",alignItems:"center",height:64,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}})),v=function(e){var a=e.className,t=Object(s.a)(e,["className"]),n=E();return r.a.createElement("div",Object.assign({className:Object(m.a)(n.root,a)},t),r.a.createElement(d.a,{variant:"h3",color:"textPrimary"},"Chats"),r.a.createElement(p.a,{flexGrow:1}),r.a.createElement(f.a,null,r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(h.a,null))),r.a.createElement(f.a,{component:u.a,to:"/app/chat/new"},r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(g.a,null))))},y=t(56),O=t(8),j=t.n(O),x=t(13),k=t(29),N=t(42),S=t(190),C=t.n(S),w=t(19),R=t(1058),I=t(608),T=t(1062),P=t(1061),A=t(1122),z=t(1150),L=t(1123),W=t(1127),F=Object(c.a)((function(e){return{root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},search:{display:"flex",alignItems:"center",height:44,borderRadius:22,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),backgroundColor:e.palette.background.dark},searchInput:{flexGrow:1,marginLeft:e.spacing(1)},avatar:{height:32,width:32}}})),q=Object(n.forwardRef)((function(e,a){var t=e.className,n=e.isFocused,c=e.onChange,l=e.onClickAway,i=e.onFocus,o=e.onSelect,u=e.query,f=e.results,h=Object(s.a)(e,["className","isFocused","onChange","onClickAway","onFocus","onSelect","query","results"]),g=F(),E=u&&n;return r.a.createElement(R.a,{onClickAway:l},r.a.createElement("div",Object.assign({className:Object(m.a)(g.root,t),ref:a},h),r.a.createElement("div",{className:g.search},r.a.createElement(b.a,{fontSize:"small",color:"action"},r.a.createElement(W.a,null)),r.a.createElement(I.a,{className:g.searchInput,disableUnderline:!0,onChange:c,onFocus:i,placeholder:"Search contacts",value:u})),E&&r.a.createElement(p.a,{mt:2},r.a.createElement(d.a,{variant:"h6",color:"textSecondary"},"Contacts"),r.a.createElement(T.a,null,f.map((function(e){return r.a.createElement(P.a,{button:!0,key:e.id,onClick:function(){return function(e){o&&o(e)}(e)}},r.a.createElement(A.a,null,r.a.createElement(z.a,{src:e.avatar,className:g.avatar})),r.a.createElement(L.a,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"h6",color:"textPrimary"}}))}))))))}));q.defaultProps={isFocused:!1,query:"",results:[]};var M=q,G=t(43),B=t(1149),D=t(1418),U=Object(c.a)((function(e){return{active:{backgroundColor:e.palette.action.selected,boxShadow:"inset 4px 0px 0px ".concat(e.palette.secondary.main)},smallAvatar:{height:30,width:30,"&:first-child":{marginTop:10}},unreadIndicator:{height:18,marginTop:2,minWidth:18,padding:2}}})),H=function(e){var a=e.active,t=e.className,n=e.thread,c=e.onSelect,l=Object(s.a)(e,["active","className","thread","onSelect"]),i=U(),o=function(e,a){var t=e.participants.filter((function(e){return e.id!==a})),n=t.reduce((function(e,a){return[].concat(Object(G.a)(e),[a.name])}),[]).join(", "),r="",c=e.messages[e.messages.length-1];if(c){var l=c.senderId===a?"Me: ":"",i="image"===c.contentType?"Sent a photo":c.body;r="".concat(l).concat(i)}return{otherParticipants:t,displayNames:n,displayText:r}}(n,"5e86809283e28b96d2d38537");return r.a.createElement(P.a,Object.assign({button:!0,className:Object(m.a)(Object(y.a)({},i.active,a),t),onClick:c},l),r.a.createElement(A.a,null,r.a.createElement(D.a,{classes:{avatar:o.otherParticipants.length>1?i.smallAvatar:null},max:2},o.otherParticipants.map((function(e){return r.a.createElement(z.a,{alt:"Person",key:e.id,src:e.avatar})})))),r.a.createElement(L.a,{primary:o.displayNames,primaryTypographyProps:{noWrap:!0,variant:"h6",color:"textPrimary"},secondary:o.displayText,secondaryTypographyProps:{noWrap:!0,variant:"body2",color:"textSecondary"}}),r.a.createElement(p.a,{ml:2,display:"flex",flexDirection:"column",alignItems:"flex-end"},n.unreadCount>0&&r.a.createElement(B.a,{className:i.unreadIndicator,color:"secondary",size:"small",label:n.unreadCount})))};H.defaultProps={active:!1,onSelect:function(){}};var J=H,K=Object(c.a)((function(){return{root:{}}})),X=function(e){var a=e.className,t=Object(s.a)(e,["className"]),n=K(),c=Object(l.c)((function(e){return e.chat})),i=c.threads,o=c.activeThreadId,u=Object(N.g)();return r.a.createElement(T.a,Object.assign({className:Object(m.a)(n.root,a)},t),i.allIds.map((function(e){return r.a.createElement(J,{active:o===e,key:e,onSelect:function(){return function(e){var a=i.byId[e],t="";"GROUP"===a.type?t=a.id:t=a.participants.find((function(e){return"5e86809283e28b96d2d38537"!==e.id})).username;u.push("/app/chat/".concat(t))}(e)},thread:i.byId[e]})})))},_=Object(c.a)((function(){return{hideThreadList:{display:"none"}}})),Q=function(){var e=_(),a=Object(N.g)(),t=Object(n.useState)(!1),c=Object(k.a)(t,2),l=c[0],i=c[1],o=Object(n.useState)(""),s=Object(k.a)(o,2),u=s[0],d=s[1],p=Object(n.useState)([]),f=Object(k.a)(p,2),b=f[0],h=f[1],g=function(){var e=Object(x.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a.persist(),t=a.target.value,d(t),!t){e.next=11;break}return e.next=7,w.a.get("/api/chat/search",{params:{query:t}});case 7:n=e.sent,h(n.data.results),e.next=12;break;case 11:h([]);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(C.a,{options:{suppressScrollX:!0}},r.a.createElement(M,{isFocused:l,onChange:g,onClickAway:function(){i(!1),d("")},onFocus:function(e){e.persist(),i(!0)},onSelect:function(e){i(!1),d(""),a.push("/app/chat/".concat(e.username))},query:u,results:b}),r.a.createElement(X,{className:Object(m.a)(Object(y.a)({},e.hideThreadList,l))}))},V=t(1116),Y=t(1068),Z=t(248),$=Object(c.a)((function(e){return{root:{alignItems:"center",display:"flex",padding:e.spacing(2)},container:{marginLeft:e.spacing(1)},recipient:{marginLeft:4,marginRight:4},input:{backgroundColor:e.palette.background.default,borderRadius:16,height:32,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},compactInput:{maxWidth:120},searchResults:{marginTop:e.spacing(1),maxWidth:"100%",width:320}}})),ee=function(e){var a=e.className,t=e.onAddRecipient,c=e.onRemoveRecipient,l=e.recipients,i=Object(s.a)(e,["className","onAddRecipient","onRemoveRecipient","recipients"]),o=$(),u=Object(n.useRef)(null),f=Object(n.useState)(""),b=Object(k.a)(f,2),h=b[0],g=b[1],E=Object(n.useState)(!0),v=Object(k.a)(E,2),O=v[0],N=v[1],S=Object(n.useState)([]),C=Object(k.a)(S,2),W=C[0],F=C[1],q=function(e,a){var t=a.reduce((function(e,a){return[].concat(Object(G.a)(e),[a.id])}),[]);return e.filter((function(e){return!t.includes(e.id)}))}(W,l),M=h&&O,D=function(){var e=Object(x.a)(j.a.mark((function e(a){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a.persist(),t=a.target.value,g(t),!t){e.next=11;break}return e.next=7,w.a.get("/api/chat/search",{params:{query:t}});case 7:n=e.sent,F(n.data.results),e.next=12;break;case 11:F([]);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",Object.assign({className:Object(m.a)(o.root,a)},i),r.a.createElement(d.a,{variant:"body1",color:"textSecondary"},"To:"),r.a.createElement("div",{className:o.container,ref:u},l.map((function(e){return r.a.createElement(B.a,{className:o.recipient,color:"primary",key:e.id,label:e.name,onDelete:function(){return a=e.id,void(c&&c(a));var a},size:"small"})})),r.a.createElement(I.a,{className:Object(m.a)(o.input,Object(y.a)({},o.compactInput,l.length>0)),disableUnderline:!0,onBlur:function(e){e.persist(),M||N(!1)},onChange:D,onFocus:function(e){e.persist(),N(!0)},placeholder:0===l.length?"Search contacts":"",value:h})),M&&r.a.createElement(R.a,{onClickAway:function(){N(!1)}},r.a.createElement(Y.a,{anchorEl:u.current,open:O,placement:"bottom-start"},r.a.createElement(Z.a,{className:o.searchResults},0===q.length?r.a.createElement(p.a,{pb:2,pt:2,px:2,textAlign:"center"},r.a.createElement(d.a,{color:"textPrimary",gutterBottom:!0,variant:"h4"},"Nothing Found"),r.a.createElement(d.a,{color:"textSecondary",variant:"body2"},"We couldn't find any matches for \"",h,'". Try checking for typos or using complete words.')):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{px:2,pt:2},r.a.createElement(d.a,{color:"textSecondary",variant:"h6"},"Contacts")),r.a.createElement(T.a,null,q.map((function(e){return r.a.createElement(P.a,{button:!0,key:e.id,onClick:function(){return a=e,g(""),void(t&&t(a));var a}},r.a.createElement(A.a,null,r.a.createElement(z.a,{src:e.avatar})),r.a.createElement(L.a,{primary:e.name,primaryTypographyProps:{color:"textPrimary",noWrap:!0,variant:"h6"}}))}))))))))};ee.defaultProps={onAddRecipient:function(){},onRemoveRecipient:function(){},recipients:[]};var ae=ee,te=t(1121),ne=t(598),re=t(1120),ce=t(1249),le=t(2107),ie=t(2108),oe=t(1419),se=t(2109),ue=t(1335),me=t(1592),de=t(2110),pe=Object(c.a)((function(e){return{root:{alignItems:"center",backgroundColor:e.palette.background.default,borderBottom:"1px solid ".concat(e.palette.divider),display:"flex",flexShrink:0,minHeight:64,paddingBottom:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),paddingTop:e.spacing(1)},smallAvatar:{height:30,width:30,"&:first-child":{marginTop:10}}}})),fe=function(e){var a=e.className,t=e.participants,c=Object(s.a)(e,["className","participants"]),l=pe(),i=Object(n.useRef)(null),o=Object(n.useState)(!1),u=Object(k.a)(o,2),h=u[0],g=u[1],E=t.filter((function(e){return"5e86809283e28b96d2d38537"!==e.id})),v=E.reduce((function(e,a){return[].concat(Object(G.a)(e),[a.name])}),[]).join(", ");return r.a.createElement("div",Object.assign({className:Object(m.a)(l.root,a)},c),r.a.createElement(p.a,{alignItems:"center",display:"flex"},r.a.createElement(D.a,{classes:{avatar:E.length>1?l.smallAvatar:null},max:2},E.map((function(e){return r.a.createElement(z.a,{alt:"Person",key:e.id,src:e.avatar})}))),r.a.createElement(d.a,{color:"textPrimary",variant:"h5"},v)),r.a.createElement(p.a,{flexGrow:1}),r.a.createElement(f.a,null,r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(le.a,null))),r.a.createElement(f.a,null,r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(ie.a,null))),r.a.createElement(te.a,{title:"More options"},r.a.createElement(f.a,{onClick:function(){g(!0)},ref:i},r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(oe.a,null)))),r.a.createElement(ne.a,{anchorEl:i.current,keepMounted:!0,elevation:1,onClose:function(){g(!1)},open:h},r.a.createElement(re.a,null,r.a.createElement(ce.a,null,r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(se.a,null))),r.a.createElement(L.a,{primary:"Block contact"})),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(ue.a,null))),r.a.createElement(L.a,{primary:"Delete thread"})),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(me.a,null))),r.a.createElement(L.a,{primary:"Archive thread"})),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(de.a,null))),r.a.createElement(L.a,{primary:"Mute notifications"}))))};fe.defaultProps={participants:[]};var be=fe,he=t(2),ge=t.n(he),Ee=t(4),ve=t.n(Ee),ye=t(1314),Oe=t(1095),je=t(100),xe=Object(c.a)((function(e){return{root:{marginBottom:e.spacing(2),display:"flex"},avatar:{height:32,width:32},image:{cursor:"pointer",height:"auto",maxWidth:"100%",width:380}}})),ke=function(e){var a=e.className,t=e.message,c=e.thread,l=Object(s.a)(e,["className","message","thread"]),i=xe(),o=Object(je.a)().user,f=Object(n.useState)(null),b=Object(k.a)(f,2),h=b[0],g=b[1],E=c.participants.find((function(e){return e.id===t.senderId})),v="5e86809283e28b96d2d38537"===t.senderId?{avatar:o.avatar,name:"Me",type:"user"}:{avatar:E.avatar,name:E.name,type:"contact"};return r.a.createElement("div",Object.assign({className:Object(m.a)(i.root,a)},l),r.a.createElement(p.a,{display:"flex",maxWidth:500,ml:"user"===v.type?"auto":0},r.a.createElement(z.a,{className:i.avatar,src:v.avatar}),r.a.createElement(p.a,{ml:2},r.a.createElement(p.a,{bgcolor:"user"===v.type?"secondary.main":"background.default",borderRadius:"borderRadius",boxShadow:1,color:"user"===v.type?"secondary.contrastText":"text.primary",px:2,py:1},r.a.createElement(Oe.a,{color:"inherit",component:u.a,to:"#",variant:"h6"},v.name),r.a.createElement(p.a,{mt:1},"image"===t.contentType?r.a.createElement(p.a,{mt:2,onClick:function(){return g(t.body)}},r.a.createElement("img",{alt:"Attachment",className:i.image,src:t.body})):r.a.createElement(d.a,{color:"inherit",variant:"body1"},t.body))),r.a.createElement(p.a,{mt:1,display:"flex",justifyContent:"flex-end"},r.a.createElement(d.a,{noWrap:!0,color:"textSecondary",variant:"caption"},ve()(t.createdAt).fromNow())))),h&&r.a.createElement(ye.a,{large:h,onClose:function(){return g(null)}}))},Ne=Object(c.a)((function(e){return{root:{padding:e.spacing(2)}}}));ke.propTypes={className:ge.a.string,thread:ge.a.object.isRequired};var Se=function(e){var a=e.className,t=e.thread,c=Object(s.a)(e,["className","thread"]),l=Ne(),i=Object(n.useRef)(null);return Object(n.useEffect)((function(){i.current&&(i.current._container.scrollTop=i.current._container.scrollHeight)}),[t.messages]),r.a.createElement(C.a,Object.assign({className:Object(m.a)(l.root,a),options:{suppressScrollX:!0},ref:i},c),t.messages.map((function(e){return r.a.createElement(ke,{key:e.id,message:e,thread:t})})))},Ce=t(1200),we=t.n(Ce),Re=t(1204),Ie=t.n(Re),Te=t(1593),Pe=Object(c.a)((function(e){return{root:{alignItems:"center",backgroundColor:e.palette.background.default,display:"flex",padding:e.spacing(1,2)},inputContainer:{flexGrow:1,marginLeft:e.spacing(2),padding:e.spacing(1)},divider:{height:24,width:1},fileInput:{display:"none"}}})),Ae=function(e){var a=e.className,t=e.disabled,c=e.onSend,l=Object(s.a)(e,["className","disabled","onSend"]),i=Pe(),o=Object(je.a)().user,u=Object(n.useRef)(null),d=Object(n.useState)(""),p=Object(k.a)(d,2),h=p[0],g=p[1],E=function(){u.current.click()},v=function(){h&&(c&&c(h),g(""))};return r.a.createElement("div",Object.assign({className:Object(m.a)(i.root,a)},l),r.a.createElement(z.a,{alt:"Person",src:o.avatar}),r.a.createElement(Z.a,{variant:"outlined",className:i.inputContainer},r.a.createElement(I.a,{disableUnderline:!0,fullWidth:!0,value:h,onChange:function(e){e.persist(),g(e.target.value)},onKeyUp:function(e){13===e.keyCode&&v()},placeholder:"Leave a message",disabled:t})),r.a.createElement(te.a,{title:"Send"},r.a.createElement("span",null,r.a.createElement(f.a,{color:"secondary",disabled:!h||t,onClick:v},r.a.createElement(b.a,{fontSize:"small"},r.a.createElement(Te.a,null))))),r.a.createElement(V.a,{className:i.divider}),r.a.createElement(te.a,{title:"Attach photo"},r.a.createElement("span",null,r.a.createElement(f.a,{edge:"end",onClick:E,disabled:t},r.a.createElement(we.a,null)))),r.a.createElement(te.a,{title:"Attach file"},r.a.createElement("span",null,r.a.createElement(f.a,{edge:"end",onClick:E,disabled:t},r.a.createElement(Ie.a,null)))),r.a.createElement("input",{className:i.fileInput,ref:u,type:"file"}))};Ae.defaultProps={disabled:!1,onSend:function(){}};var ze=Ae,Le=Object(c.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",flexDirection:"column",flexGrow:1}}})),We=function(){var e=Le(),a=Object(l.b)(),t=Object(N.g)(),c=Object(N.i)().threadKey,i=Object(l.c)((function(e){return e.chat})),s=i.activeThreadId,u=i.participants,m=i.recipients,d=Object(l.c)((function(e){return function(e){var a=e.chat,t=a.threads,n=a.activeThreadId,r=t.byId[n];return r||{id:null,messages:[],participants:[],unreadMessages:0}}(e)})),f=c?"DETAIL":"COMPOSE",b=function(){var e=Object(x.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c?function(){var e=Object(x.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(o.c)(c)),e.prev=1,e.next=4,a(Object(o.d)(c));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),t.push("/app/chat/new");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}()():s&&a(Object(o.i)())}),[c]),Object(n.useEffect)((function(){s&&a(Object(o.f)(s))}),[a,s]),r.a.createElement("div",{className:e.root},"DETAIL"===f&&r.a.createElement(be,{participants:u}),"COMPOSE"===f&&r.a.createElement(ae,{onAddRecipient:function(e){a(Object(o.a)(e))},onRemoveRecipient:function(e){a(Object(o.h)(e))},recipients:m}),r.a.createElement(p.a,{flexGrow:1,overflow:"hidden"},r.a.createElement(Se,{thread:d})),r.a.createElement(V.a,null),r.a.createElement(ze,{disabled:!0,onSend:b}))},Fe=Object(c.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",position:"relative"},sidebar:{backgroundColor:e.palette.background.default,borderRight:"1px solid ".concat(e.palette.divider),width:300}}}));a.default=function(){var e=Fe(),a=Object(l.b)(),t=Object(n.useRef)(null);return Object(n.useEffect)((function(){a(Object(o.e)())}),[a]),r.a.createElement(i.a,{className:e.root,title:"Chat",ref:t},r.a.createElement("div",{className:e.sidebar},r.a.createElement(v,null),r.a.createElement(Q,null)),r.a.createElement(We,null))}}}]);
//# sourceMappingURL=62.eb14804f.chunk.js.map